// ðŸŽ‰ Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ Ð´Ð»Ñ Telegram Mini App
// ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ñ Ð¸ Ð¿Ð¾Ð´ÑÐºÐ°Ð·ÐºÐ¸ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹

class WelcomeScript {
    constructor() {
        this.welcomeMessages = {
            morning: [
                "ðŸŒ… Ð”Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾! Ð“Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð¿Ð¾Ð·Ð°Ð±Ð¾Ñ‚Ð¸Ñ‚ÑŒÑÑ Ð¾ Ð²Ð°ÑˆÐµÐ¼ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ðµ?",
                "â˜€ï¸ Ð”Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾! Ð’Ð°Ñˆ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ† ÑƒÐ¶Ðµ Ð¶Ð´ÐµÑ‚ Ð·Ð°Ð²Ñ‚Ñ€Ð°ÐºÐ°!",
                "ðŸŒž Ð”Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾! Ð’Ñ€ÐµÐ¼Ñ Ð´Ð»Ñ ÑƒÑ‚Ñ€ÐµÐ½Ð½ÐµÐ¹ Ð¿Ñ€Ð¾Ð³ÑƒÐ»ÐºÐ¸ Ñ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†ÐµÐ¼!"
            ],
            afternoon: [
                "ðŸŒ¤ï¸ Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ! ÐšÐ°Ðº Ð´ÐµÐ»Ð° Ñƒ Ð²Ð°ÑˆÐµÐ³Ð¾ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°?",
                "â˜€ï¸ Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ! ÐÐµ Ð·Ð°Ð±ÑƒÐ´ÑŒÑ‚Ðµ Ð¿Ð¾Ð¸Ð³Ñ€Ð°Ñ‚ÑŒ Ñ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†ÐµÐ¼!",
                "ðŸŒ¤ï¸ Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ! Ð’Ð°Ñˆ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ† ÑÐºÑƒÑ‡Ð°ÐµÑ‚ Ð¿Ð¾ Ð²Ð°Ð¼!"
            ],
            evening: [
                "ðŸŒ† Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€! Ð’Ñ€ÐµÐ¼Ñ Ð´Ð»Ñ Ð²ÐµÑ‡ÐµÑ€Ð½ÐµÐ³Ð¾ ÑƒÑ…Ð¾Ð´Ð° Ð·Ð° Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†ÐµÐ¼!",
                "ðŸŒ… Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€! Ð’Ð°Ñˆ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ† Ð³Ð¾Ñ‚Ð¾Ð² ÐºÐ¾ ÑÐ½Ñƒ!",
                "ðŸŒ† Ð”Ð¾Ð±Ñ€Ñ‹Ð¹ Ð²ÐµÑ‡ÐµÑ€! ÐÐµ Ð·Ð°Ð±ÑƒÐ´ÑŒÑ‚Ðµ Ð¿Ð¾Ð³Ð»Ð°Ð´Ð¸Ñ‚ÑŒ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð° Ð¿ÐµÑ€ÐµÐ´ ÑÐ½Ð¾Ð¼!"
            ],
            night: [
                "ðŸŒ™ Ð”Ð¾Ð±Ñ€Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸! Ð’Ð°Ñˆ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ† ÑƒÐ¶Ðµ ÑÐ¿Ð¸Ñ‚!",
                "ðŸŒ™ Ð”Ð¾Ð±Ñ€Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸! Ð—Ð°Ð²Ñ‚Ñ€Ð° ÑÐ½Ð¾Ð²Ð° Ð±ÑƒÐ´ÐµÐ¼ Ð·Ð°Ð±Ð¾Ñ‚Ð¸Ñ‚ÑŒÑÑ Ð¾ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ðµ!",
                "ðŸŒ™ Ð”Ð¾Ð±Ñ€Ð¾Ð¹ Ð½Ð¾Ñ‡Ð¸! Ð¡Ð»Ð°Ð´ÐºÐ¸Ñ… ÑÐ½Ð¾Ð² Ð²Ð°Ð¼ Ð¸ Ð²Ð°ÑˆÐµÐ¼Ñƒ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ñƒ!"
            ]
        };
        
        this.tips = [
            "ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚: Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ ÐºÐ¾Ñ€Ð¼Ð¸Ñ‚Ðµ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð° Ð´Ð»Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ñ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ!",
            "ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚: Ð˜Ð³Ñ€Ð°Ð¹Ñ‚Ðµ Ñ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†ÐµÐ¼ Ð´Ð»Ñ Ð¿Ð¾Ð²Ñ‹ÑˆÐµÐ½Ð¸Ñ ÑÑ‡Ð°ÑÑ‚ÑŒÑ!",
            "ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚: Ð”Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ñƒ Ð¾Ñ‚Ð´Ñ‹Ñ…Ð°Ñ‚ÑŒ Ð´Ð»Ñ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ½ÐµÑ€Ð³Ð¸Ð¸!",
            "ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚: Ð“Ð»Ð°Ð´ÑŒÑ‚Ðµ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð° Ð´Ð»Ñ ÑƒÐºÑ€ÐµÐ¿Ð»ÐµÐ½Ð¸Ñ ÑÐ²ÑÐ·Ð¸!",
            "ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚: Ð¡Ð»ÐµÐ´Ð¸Ñ‚Ðµ Ð·Ð° ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¼ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð° - Ð¾Ð½ Ñ€Ð°ÑÑ‚ÐµÑ‚ Ñ ÐºÐ°Ð¶Ð´Ñ‹Ð¼ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸ÐµÐ¼!",
            "ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚: Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿Ð°Ñ€Ñƒ Ñ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð¼ Ð´Ð»Ñ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð½Ð¾Ð³Ð¾ ÑƒÑ…Ð¾Ð´Ð°!",
            "ðŸ’¡ Ð¡Ð¾Ð²ÐµÑ‚: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ Ð´Ð»Ñ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑÐ°!"
        ];
        
        this.encouragements = [
            "ðŸŒŸ Ð’Ñ‹ Ð¾Ñ‚Ð»Ð¸Ñ‡Ð½Ñ‹Ð¹ Ñ…Ð¾Ð·ÑÐ¸Ð½!",
            "ðŸŒŸ Ð’Ð°Ñˆ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ† Ð¾Ñ‡ÐµÐ½ÑŒ ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²!",
            "ðŸŒŸ ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð°Ð¹Ñ‚Ðµ Ð² Ñ‚Ð¾Ð¼ Ð¶Ðµ Ð´ÑƒÑ…Ðµ!",
            "ðŸŒŸ Ð’Ñ‹ Ð´ÐµÐ»Ð°ÐµÑ‚Ðµ Ð²ÑÐµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾!",
            "ðŸŒŸ Ð’Ð°Ñˆ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ† Ð²Ð°Ñ Ð»ÑŽÐ±Ð¸Ñ‚!"
        ];
    }
    
    // ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ ÑÑƒÑ‚Ð¾Ðº
    getTimeOfDay() {
        const hour = new Date().getHours();
        if (hour >= 5 && hour < 12) return 'morning';
        if (hour >= 12 && hour < 17) return 'afternoon';
        if (hour >= 17 && hour < 23) return 'evening';
        return 'night';
    }
    
    // ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾Ð³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
    getRandomMessage(array) {
        return array[Math.floor(Math.random() * array.length)];
    }
    
    // ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ðµ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ
    getWelcomeMessage(user) {
        const timeOfDay = this.getTimeOfDay();
        const timeMessage = this.getRandomMessage(this.welcomeMessages[timeOfDay]);
        
        let welcomeText = `${timeMessage}\n\n`;
        
        if (user.first_name) {
            welcomeText += `ÐŸÑ€Ð¸Ð²ÐµÑ‚, ${user.first_name}! ðŸ‘‹\n\n`;
        }
        
        // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐµ
        if (user.hasCouple) {
            welcomeText += "ðŸ’• Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð¿Ð°Ñ€Ð° - ÑÑ‚Ð¾ Ð·Ð´Ð¾Ñ€Ð¾Ð²Ð¾!\n";
        } else {
            welcomeText += "ðŸ’• Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿Ð°Ñ€Ñƒ Ñ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð¼ Ð´Ð»Ñ ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð½Ð¾Ð³Ð¾ ÑƒÑ…Ð¾Ð´Ð°!\n";
        }
        
        // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÑÐ¾Ð²ÐµÑ‚ Ð´Ð½Ñ
        welcomeText += `\n${this.getRandomMessage(this.tips)}`;
        
        return welcomeText;
    }
    
    // ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð´Ð»Ñ Ð½Ð¾Ð²Ñ‹Ñ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
    getNewUserWelcome(user) {
        return `ðŸŽ‰ Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð¼Ð¸Ñ€ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†ÐµÐ²!\n\n` +
               `ÐŸÑ€Ð¸Ð²ÐµÑ‚, ${user.first_name || 'Ð´Ñ€ÑƒÐ³'}! ðŸ‘‹\n\n` +
               `ðŸ¾ Ð—Ð´ÐµÑÑŒ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ:\n` +
               `â€¢ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð°Ñ€Ñƒ Ñ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð¼\n` +
               `â€¢ Ð—Ð°Ð²ÐµÑÑ‚Ð¸ Ð¾Ð±Ñ‰ÐµÐ³Ð¾ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°\n` +
               `â€¢ Ð£Ñ…Ð°Ð¶Ð¸Ð²Ð°Ñ‚ÑŒ Ð·Ð° Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†ÐµÐ¼ Ð²Ð¼ÐµÑÑ‚Ðµ\n` +
               `â€¢ ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ Ð¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ\n\n` +
               `${this.getRandomMessage(this.tips)}`;
    }
    
    // ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð¿Ñ€Ð¸ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ð¸
    getReturnWelcome(user, pet) {
        const timeOfDay = this.getTimeOfDay();
        const timeMessage = this.getRandomMessage(this.welcomeMessages[timeOfDay]);
        
        let welcomeText = `${timeMessage}\n\n`;
        welcomeText += `Ð¡ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸ÐµÐ¼, ${user.first_name || 'Ð´Ñ€ÑƒÐ³'}! ðŸ‘‹\n\n`;
        
        if (pet) {
            const petEmoji = this.getPetEmoji(pet.type);
            welcomeText += `${petEmoji} ${pet.name} Ð¾Ñ‡ÐµÐ½ÑŒ Ñ€Ð°Ð´ Ð²Ð°Ñ Ð²Ð¸Ð´ÐµÑ‚ÑŒ!\n`;
            
            // ÐÐ½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÐ¼ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°
            if (pet.hunger < 30) {
                welcomeText += "ðŸ½ï¸ ÐŸÐ¸Ñ‚Ð¾Ð¼ÐµÑ† Ð³Ð¾Ð»Ð¾Ð´ÐµÐ½ - Ð¿Ð¾ÐºÐ¾Ñ€Ð¼Ð¸Ñ‚Ðµ ÐµÐ³Ð¾!\n";
            }
            if (pet.happiness < 50) {
                welcomeText += "ðŸŽ¾ ÐŸÐ¸Ñ‚Ð¾Ð¼ÐµÑ† Ð³Ñ€ÑƒÑÑ‚Ð¸Ñ‚ - Ð¿Ð¾Ð¸Ð³Ñ€Ð°Ð¹Ñ‚Ðµ Ñ Ð½Ð¸Ð¼!\n";
            }
            if (pet.energy < 30) {
                welcomeText += "ðŸ˜´ ÐŸÐ¸Ñ‚Ð¾Ð¼ÐµÑ† ÑƒÑÑ‚Ð°Ð» - Ð´Ð°Ð¹Ñ‚Ðµ ÐµÐ¼Ñƒ Ð¾Ñ‚Ð´Ð¾Ñ…Ð½ÑƒÑ‚ÑŒ!\n";
            }
            
            welcomeText += `\nðŸ“Š Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ: ${pet.level} | ÐžÐ¿Ñ‹Ñ‚: ${pet.experience}/100\n`;
        }
        
        welcomeText += `\n${this.getRandomMessage(this.encouragements)}`;
        
        return welcomeText;
    }
    
    // ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐ¼Ð¾Ð´Ð·Ð¸ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°
    getPetEmoji(type) {
        const emojis = {
            cat: 'ðŸ±',
            dog: 'ðŸ•',
            rabbit: 'ðŸ°'
        };
        return emojis[type] || 'ðŸ¾';
    }
    
    // Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð¿Ð°Ñ€Ñ‹
    getCoupleCreatedMessage(partnerId) {
        return `ðŸ’• ÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÐµÐ¼! ÐŸÐ°Ñ€Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð°!\n\n` +
               `ðŸŽ‰ Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ:\n` +
               `â€¢ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¾Ð±Ñ‰ÐµÐ³Ð¾ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°\n` +
               `â€¢ Ð£Ñ…Ð°Ð¶Ð¸Ð²Ð°Ñ‚ÑŒ Ð·Ð° Ð½Ð¸Ð¼ Ð²Ð¼ÐµÑÑ‚Ðµ\n` +
               `â€¢ Ð”ÐµÐ»Ð¸Ñ‚ÑŒÑÑ Ñ€Ð°Ð´Ð¾ÑÑ‚ÑŒÑŽ Ñ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð¼\n\n` +
               `ID Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð°: ${partnerId}\n` +
               `ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ ÑÑ‚Ð¸Ð¼ ID Ñ Ð¿Ð°Ñ€Ñ‚Ð½ÐµÑ€Ð¾Ð¼!`;
    }
    
    // Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°
    getPetCreatedMessage(pet) {
        const petEmoji = this.getPetEmoji(pet.type);
        return `ðŸŽ‰ ÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÐµÐ¼! ÐŸÐ¸Ñ‚Ð¾Ð¼ÐµÑ† ÑÐ¾Ð·Ð´Ð°Ð½!\n\n` +
               `${petEmoji} Ð—Ð½Ð°ÐºÐ¾Ð¼ÑŒÑ‚ÐµÑÑŒ Ñ ${pet.name}!\n\n` +
               `ðŸ¾ Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ:\n` +
               `â€¢ ÐšÐ¾Ñ€Ð¼Ð¸Ñ‚ÑŒ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°\n` +
               `â€¢ Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ Ñ Ð½Ð¸Ð¼\n` +
               `â€¢ Ð£ÐºÐ»Ð°Ð´Ñ‹Ð²Ð°Ñ‚ÑŒ ÑÐ¿Ð°Ñ‚ÑŒ\n` +
               `â€¢ Ð“Ð»Ð°Ð´Ð¸Ñ‚ÑŒ ÐµÐ³Ð¾\n\n` +
               `${this.getRandomMessage(this.encouragements)}`;
    }
    
    // Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ
    getActionMessage(action, pet) {
        const actionEmoji = {
            feed: 'ðŸ½ï¸',
            play: 'ðŸŽ¾',
            sleep: 'ðŸ˜´',
            pet: 'ðŸ¤—'
        };
        
        const actionNames = {
            feed: 'Ð¿Ð¾ÐºÐ¾Ñ€Ð¼Ð¸Ð»Ð¸',
            play: 'Ð¿Ð¾Ð¸Ð³Ñ€Ð°Ð»Ð¸ Ñ',
            sleep: 'ÑƒÐ»Ð¾Ð¶Ð¸Ð»Ð¸ ÑÐ¿Ð°Ñ‚ÑŒ',
            pet: 'Ð¿Ð¾Ð³Ð»Ð°Ð´Ð¸Ð»Ð¸'
        };
        
        const emoji = actionEmoji[action] || 'ðŸ¾';
        const name = actionNames[action] || 'Ð¿Ð¾Ð·Ð°Ð±Ð¾Ñ‚Ð¸Ð»Ð¸ÑÑŒ Ð¾';
        
        return `${emoji} Ð’Ñ‹ ${name} ${pet.name}!\n\n` +
               `ðŸ“Š Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ð°:\n` +
               `ðŸ½ï¸ Ð“Ð¾Ð»Ð¾Ð´: ${pet.hunger}%\n` +
               `ðŸ˜Š Ð¡Ñ‡Ð°ÑÑ‚ÑŒÐµ: ${pet.happiness}%\n` +
               `âš¡ Ð­Ð½ÐµÑ€Ð³Ð¸Ñ: ${pet.energy}%\n\n` +
               `${this.getRandomMessage(this.encouragements)}`;
    }
    
    // Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð²Ñ‹ÑˆÐµÐ½Ð¸Ð¸ ÑƒÑ€Ð¾Ð²Ð½Ñ
    getLevelUpMessage(pet) {
        const petEmoji = this.getPetEmoji(pet.type);
        return `ðŸŽ‰ ÐŸÐ¾Ð·Ð´Ñ€Ð°Ð²Ð»ÑÐµÐ¼! ${petEmoji} ${pet.name} Ð´Ð¾ÑÑ‚Ð¸Ð³ ÑƒÑ€Ð¾Ð²Ð½Ñ ${pet.level}!\n\n` +
               `ðŸŒŸ Ð’Ð°Ñˆ Ð¿Ð¸Ñ‚Ð¾Ð¼ÐµÑ† Ñ€Ð°ÑÑ‚ÐµÑ‚ Ð¸ Ñ€Ð°Ð·Ð²Ð¸Ð²Ð°ÐµÑ‚ÑÑ!\n` +
               `ðŸ“ˆ ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð°Ð¹Ñ‚Ðµ Ð·Ð°Ð±Ð¾Ñ‚Ð¸Ñ‚ÑŒÑÑ Ð¾ Ð½ÐµÐ¼!\n\n` +
               `${this.getRandomMessage(this.encouragements)}`;
    }
    
    // Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ
    getDailyMessage(user, pet) {
        const today = new Date().toDateString();
        const lastVisit = localStorage.getItem('lastVisit');
        
        if (lastVisit === today) {
            return null; // Ð£Ð¶Ðµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°Ð»Ð¸ ÑÐµÐ³Ð¾Ð´Ð½Ñ
        }
        
        localStorage.setItem('lastVisit', today);
        
        const timeOfDay = this.getTimeOfDay();
        const timeMessage = this.getRandomMessage(this.welcomeMessages[timeOfDay]);
        
        let dailyText = `ðŸ“… Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð½Ð¾Ð²Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ!\n\n`;
        dailyText += `${timeMessage}\n\n`;
        
        if (pet) {
            dailyText += `${this.getPetEmoji(pet.type)} ${pet.name} ÑÐ¾ÑÐºÑƒÑ‡Ð¸Ð»ÑÑ Ð¿Ð¾ Ð²Ð°Ð¼!\n`;
            dailyText += `ðŸ“Š Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ: ${pet.level} | ÐžÐ¿Ñ‹Ñ‚: ${pet.experience}/100\n\n`;
        }
        
        dailyText += `${this.getRandomMessage(this.tips)}`;
        
        return dailyText;
    }
}

// Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸
if (typeof module !== 'undefined' && module.exports) {
    module.exports = WelcomeScript;
} 